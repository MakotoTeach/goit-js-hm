{"version":3,"sources":["webpack:///./templates/image-list-items.hbs","webpack:///./js/images-service.js","webpack:///./js/spinner.js","webpack:///./js/images.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","propertyIsEnumerable","helper","alias2","nullContext","alias3","hooks","helperMissing","alias4","alias5","escapeExpression","largeImageURL","call","webformatURL","tags","likes","views","comments","downloads","stack1","each","program","noop","page","query","fetchImages","requestParams","this","fetch","then","response","json","parsedResponse","incrementPage","hits","string","resetPage","spinner","document","querySelector","show","classList","remove","hide","add","refs","searchForm","gallery","loadMoreBtn","buildListImagesMarkup","items","imagesListItemsTemplates","insertImageList","insertAdjacentHTML","addEventListener","e","preventDefault","inputValue","currentTarget","elements","value","innerHTML","imagesService","searchQuery","images","catch","error","console","warn","element","window","scrollTo","left","top","scrollY","clientHeight","behavior","event","log","target","parentNode","href","currentImage","src","basicLightbox"],"mappings":"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","file":"main.3b8668a090c92b29fa6f.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=container.propertyIsEnumerable, alias2=depth0 != null ? depth0 : (container.nullContext || {}), alias3=container.hooks.helperMissing, alias4=\"function\", alias5=container.escapeExpression;\n\n  return \"<li class=\\\"gallery__item\\\"><div class=\\\"photo-card\\\">\\r\\n  <a href=\\\"\"\n    + alias5(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\r\\n<img class=\\\"gallery__image\\\" src=\\\"\"\n    + alias5(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias5(((helper = (helper = helpers.tags || (depth0 != null ? depth0.tags : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"tags\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-href=\\\"\"\n    + alias5(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"/>\\r\\n  </a>\\r\\n\\r\\n  <div class=\\\"stats\\\">\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n     \"\n    + alias5(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"likes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">visibility</i>\\r\\n      \"\n    + alias5(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"views\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">comment</i>\\r\\n      \"\n    + alias5(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"comments\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n      \"\n    + alias5(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias3),(typeof helper === alias4 ? helper.call(alias2,{\"name\":\"downloads\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n    </p>\\r\\n  </div>\\r\\n</div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\r\\n\"\n    + ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});","const baseUrl = 'https://pixabay.com/api/';\r\nconst key = '14239053-7da15a6cef2814c1860b92e83';\r\n\r\nexport default {\r\n  page: 1,\r\n  query: '',\r\n  fetchImages() {\r\n    const requestParams = `?q=${this.query}&page=${this.page}&per_page=12&image_type=photo&key=`;\r\n\r\n    return fetch(baseUrl + requestParams + key)\r\n      .then(response => response.json())\r\n      .then(parsedResponse => {\r\n        this.incrementPage();\r\n\r\n        return parsedResponse.hits;\r\n      });\r\n  },\r\n  get searchQuery() {\r\n    return this.query;\r\n  },\r\n\r\n  set searchQuery(string) {\r\n    this.query = string;\r\n  },\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  },\r\n\r\n  resetPage() {\r\n      this.page = 1;\r\n  }\r\n};\r\n\r\n\r\n// export class ImagesService {\r\n//   key = null;\r\n//   url = null;\r\n  \r\n//   constructor(url, key) {\r\n//       this.key = key;\r\n//       this.url = url;\r\n//       this.page = 1;\r\n//       this.query = '';\r\n//   }\r\n\r\n//   fetchImages() {\r\n//     const requestParams = `?q=${this.query}&page=${this.page}&per_page=12&image_type=photo&key=`;\r\n\r\n//     return fetch(this.url + requestParams + this.key)\r\n//       .then(response => response.json())\r\n//       .then(parsedResponse => {\r\n//         this.page +=1;\r\n\r\n//         return parsedResponse;\r\n//       });\r\n//   }\r\n\r\n//   resetPage() {\r\n//     this.page = 1;\r\n//   }\r\n// }","const spinner = document.querySelector('.spinner-overlay');\r\n\r\nexport default {\r\n  show() {\r\n    spinner.classList.remove('is-hidden');\r\n  },\r\n\r\n  hide() {\r\n    spinner.classList.add('is-hidden');\r\n  },\r\n};\r\n","import imagesService from './images-service';\r\nimport imagesListItemsTemplates from '../templates/image-list-items.hbs';\r\nimport spinner from '../js/spinner';\r\nimport * as basicLightbox from 'basiclightbox';\r\n\r\nconst refs = {\r\n  searchForm: document.querySelector('#search-form'),\r\n  gallery: document.querySelector('.gallery'),\r\n  loadMoreBtn: document.querySelector('button[data-action=\"load-more\"]'),\r\n};\r\n\r\nrefs.searchForm.addEventListener('submit', searchFormSubmitHandler);\r\nrefs.loadMoreBtn.addEventListener('click', loadMoreBtnHandler);\r\nrefs.gallery.addEventListener('click', handleImageClick);\r\n\r\nfunction modalOpen(src) {\r\n  const modalItem = basicLightbox.create(\r\n    `<img width=\"1400\" height=\"900\" src=\"${src}\">`,\r\n  );\r\n  modalItem.show();\r\n}\r\n\r\nfunction handleImageClick(event) {\r\n  event.preventDefault();\r\n\r\n  console.log(event.target.parentNode.href);\r\n\r\n  const currentImage = event.target.parentNode.href;\r\n\r\n  if (currentImage) {\r\n    modalOpen(currentImage);\r\n  }\r\n  return;\r\n}\r\nfunction searchFormSubmitHandler(e) {\r\n  e.preventDefault();\r\n\r\n  const inputValue = e.currentTarget.elements.query.value;\r\n  clearList();\r\n\r\n  imagesService.resetPage();\r\n\r\n  imagesService.searchQuery = inputValue;\r\n\r\n  fetchImages();\r\n}\r\n\r\nfunction loadMoreBtnHandler() {\r\n \r\n  spinner.show();\r\n  imagesService.fetchImages()\r\n    .then(images => {\r\n      const markup = buildListImagesMarkup(images);\r\n      insertImageList(markup);\r\n      spinner.hide();\r\n    })\r\n    .then(() => scrollToBottom());\r\n}\r\n\r\nfunction scrollToBottom() {\r\n  const element = document.querySelector('.gallery__item');\r\n\r\n  window.scrollTo({\r\n    left: 0,\r\n    top: window.scrollY  + element.clientHeight * 2,\r\n    behavior: 'smooth',\r\n  });\r\n}\r\n\r\nfunction fetchImages() {\r\n  spinner.show();\r\n\r\n  imagesService\r\n    .fetchImages()\r\n\r\n    .then(images => {\r\n      const markup = buildListImagesMarkup(images);\r\n      insertImageList(markup);\r\n      spinner.hide();\r\n    })\r\n    .catch(error => {\r\n      console.warn(error);\r\n    })\r\n}\r\n\r\nfunction buildListImagesMarkup(items) {\r\n  return imagesListItemsTemplates(items);\r\n}\r\n\r\nfunction insertImageList(items) {\r\n  refs.gallery.insertAdjacentHTML('beforeend', items);\r\n}\r\n\r\nfunction clearList() {\r\n  refs.gallery.innerHTML = '';\r\n}\r\n"],"sourceRoot":""}